<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SmartSeat â€” Reservation Detail</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<header class="navbar">
  <div class="brand">
    <div class="logo">SS</div>
    <div style="font-weight:600">SmartSeat</div>
  </div>
  <div class="nav-right">
    <a href="home.html">Home</a>
    <a href="profile.html">Profile</a>
  </div>
</header>

<div class="container">
  <div class="card" id="detail-card">
    <h2>Loading reservation...</h2>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  let list = JSON.parse(localStorage.getItem("reservations") || "[]");
  let data = list[list.length - 1];

  const box = document.getElementById("detail-card");

  if (!data) {
    box.innerHTML = `
      <h2>No reservation selected</h2>
      <p class="small">Go back to seat map and choose a seat/table first.</p>
      <div style="margin-top:12px"><button onclick="window.location.href='home.html'">Browse Seats</button></div>
    `;
    return;
  }

  box.innerHTML = `
    <h2>Your Reservation</h2>
    <div class="small" style="margin-top:10px">
      <strong>Venue:</strong> ${data.venue} <br>
      <strong>Seat/Table:</strong> ${data.seat} <br>
      <strong>Time:</strong> ${data.time} <br>
      ${data.extra ? `<strong>Additional:</strong> ${data.extra}<br>` : ``}
    </div>

    <div style="margin-top:20px">
      <button class="red" onclick="cancelLast()">Cancel Reservation</button>
      <button class="gray" style="margin-left:10px" onclick="window.location.href='profile.html'">View All</button>
    </div>
  `;
});

function cancelLast() {
  if (!confirm("Cancel this reservation?")) return;

  let list = JSON.parse(localStorage.getItem("reservations") || "[]");
  list.pop();

  localStorage.setItem("reservations", JSON.stringify(list));
  window.location.href = "profile.html";
}
</script>

</body>
</html>
